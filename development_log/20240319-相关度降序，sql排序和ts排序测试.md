# 2024-03-19：相关度降序，sql排序和ts排序测试
## 前提：相关度降序，
### 测试查询文本：`魔法 禁书 目录 你 我 的`
#### sql 排序
* 获取和处理搜索结果消耗时间 : 2143.300000011921 ms, 内容大小 : 21728.8818359375
* 获取和处理搜索结果消耗时间 : 2172.600000023842 ms, 内容大小 : 21728.8818359375
* 获取和处理搜索结果消耗时间 : 2156.599999964237 ms, 内容大小 : 21728.8818359375
#### ts 排序
* 获取和处理搜索结果消耗时间 : 2330.800000011921 ms, 内容大小 : 21728.8818359375
* 获取和处理搜索结果消耗时间 : 2498.400000035763 ms, 内容大小 : 21728.8818359375
* 获取和处理搜索结果消耗时间 : 2245.900000035763 ms, 内容大小 : 21728.8818359375
		
		
### 换一个数据量较小的测试：`魔法 禁书 御坂 美琴`
#### sql 排序
* 获取和处理搜索结果消耗时间 : 1163.300000011921 ms, 内容大小 : 2953.1953125
* 获取和处理搜索结果消耗时间 : 1290.2000000476837 ms, 内容大小 : 2953.1953125
* 获取和处理搜索结果消耗时间 : 1187.4000000357628 ms, 内容大小 : 2953.1953125
#### ts 排序
* 获取和处理搜索结果消耗时间 : 1154.8999999761581 ms, 内容大小 : 2953.1953125
* 获取和处理搜索结果消耗时间 : 1202 ms, 内容大小 : 2953.1953125
* 获取和处理搜索结果消耗时间 : 1430.6000000238419 ms, 内容大小 : 2953.1953125
	
## 结论
sql 排序效率更高。不过目前的 sql 相关度排序有一些无法解决的缺陷，sql 只能匹配不同关键字数量来升序降序；而 ts 是所有匹配关键字的数量来升序降序。
* 比如关键字 "a p" 
  * 在这段文本中 "apple"：sql 是2次，ts 是3次。
  * "banana"：sql 是1次，ts 是3次。
	
	